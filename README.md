# 寻星伴侣 - 卫星天线参数计算器

一个基于 Web 的卫星天线参数计算工具，帮助用户快速计算卫星天线的指向参数，包括俯仰角、方位角和极化角。

## 📖 项目简介

寻星伴侣是一款专为卫星天线安装和调试人员设计的在线计算工具。通过输入地面站的经纬度坐标和选择目标卫星，应用程序能够自动计算出天线的最佳指向参数，帮助用户精确对准卫星信号。

该工具特别适用于以下场景：
- 🛰️ 卫星通信地面站的天线安装
- 📡 卫星接收设备的调试和对准
- 🎓 卫星通信教学和演示
- 🔧 天线参数的快速验证

## ✨ 主要功能

### 1. 卫星选择
- 支持多颗常用通信卫星
- 覆盖亚太地区主要卫星：
  - Apstar 系列（亚太卫星）
  - AsiaSat 系列（亚洲卫星）
  - ChinaSat 系列（中星卫星）
  - EutelSat 系列

### 2. 位置输入
- 手动输入经纬度坐标
- 一键获取当前地理位置（基于浏览器定位功能）
- 实时地图显示当前位置

### 3. 参数计算
自动计算以下关键参数：
- **轨道经度**：目标卫星的地球静止轨道位置
- **俯仰角（Elevation）**：天线垂直方向的仰角
- **方位角（Azimuth）**：天线水平方向的指向角度（以正北为 0°）
- **极化角（Polarization）**：馈源的极化角度

### 4. 可视化展示
- 📍 基于 Leaflet 的交互式地图
- 🎯 地图上显示天线指向方向
- 🧭 直观展示方位角

## 🚀 快速开始

### 环境要求
- Node.js >= 14.0.0
- npm 或 yarn

### 安装步骤

1. **克隆项目**
```bash
git clone https://github.com/misterye/antennacal-web.git
cd antennacal-web
```

2. **安装依赖**
```bash
npm install
```

3. **启动开发服务器**
```bash
npm run dev
```

4. **访问应用**
打开浏览器访问 `http://localhost:5173`

### 构建生产版本
```bash
npm run build
```

## 📝 使用说明

1. **选择卫星**：在下拉菜单中选择目标卫星
2. **输入位置**：
   - 点击"获取位置"按钮自动获取当前位置，或
   - 手动输入地面站的纬度和经度
3. **计算参数**：点击"计算参数"按钮
4. **查看结果**：在结果区域查看计算出的天线参数
5. **参考地图**：在地图上查看位置和天线指向

## 📐 计算公式说明

### 基础参数定义

| 符号 | 含义 | 单位 |
|------|------|------|
| φₑ | 地面站纬度 | 弧度 |
| λₑ | 地面站经度 | 弧度 |
| λₛ | 卫星轨道经度 | 弧度 |
| R | 地球平均半径 | 6371 km |
| H | 地球静止轨道高度 | 35786 km |

### 1. 地心角计算

地心角 Δθ 表示从地心看地面站到卫星的角度：

```
cos(Δθ) = cos(φₑ) × cos(λₛ - λₑ)
```

### 2. 俯仰角（Elevation Angle）

俯仰角是天线相对于地平面的仰角，计算公式：

```
E = arctan( (cos(Δθ) - R/(R+H)) / √(1 - cos²(Δθ)) )
```

**推导说明**：
- 从地面站到卫星的直线距离可通过余弦定理求得
- 利用三角几何关系，将地面站、地心、卫星三点构成的三角形进行分析
- 考虑地球曲率和卫星高度，得出俯仰角公式

**特殊情况**：
- 当地面站位于卫星正下方时，E ≈ 90°
- 俯仰角越低，信号穿过的大气层越厚，衰减越大（建议 E > 10°）

### 3. 方位角（Azimuth Angle）

方位角是天线在水平面上相对于正北方向的角度（顺时针方向）：

```
A = arctan2(sin(λₛ - λₑ), cos(φₑ) × tan(0) - sin(φₑ) × cos(λₛ - λₑ))
```

**说明**：
- 使用 `arctan2` 函数确保结果在 0° 到 360° 范围内
- 0° 表示正北，90° 表示正东，180° 表示正南，270° 表示正西
- 对于北半球的地面站观测东经卫星，方位角通常在 135° 到 225° 之间（东南方向）

### 4. 极化角（Polarization Angle）

极化角是馈源相对于地平面的旋转角度：

```
P = arctan(sin(λₛ - λₑ) / tan(φₑ))
```

**推导说明**：
- 卫星信号的极化方向在卫星本地是固定的（通常为水平或垂直）
- 由于地球曲率，不同位置的地面站接收到的极化角度不同
- 需要根据地面站位置调整馈源的旋转角度以匹配卫星信号的极化方向

**注意事项**：
- 圆极化卫星（如 ChinaSat-16, ChinaSat-26）不需要调整极化角
- 线极化卫星需要精确调整极化角，误差超过 3° 可能导致信号损失超过 0.5 dB

### 角度转换

所有计算均使用弧度制，最终转换为角度制：

```
角度 = 弧度 × 180 / π
```

## 🛠️ 技术栈

- **前端框架**：Vue 3 (Composition API)
- **构建工具**：Vite
- **地图库**：Leaflet
- **语言**：JavaScript (ES6+)
- **样式**：CSS3（原生 CSS）

## 📂 项目结构

```
antennacal-web/
├── public/              # 静态资源
├── src/
│   ├── assets/          # 项目资源文件
│   ├── components/      # Vue 组件
│   │   ├── MapView.vue  # 地图组件
│   │   └── HelloWorld.vue
│   ├── utils/           # 工具函数
│   │   └── calculate.js # 卫星参数计算逻辑
│   ├── App.vue          # 根组件
│   ├── main.js          # 应用入口
│   └── style.css        # 全局样式
├── index.html           # HTML 模板
├── vite.config.js       # Vite 配置
├── package.json         # 项目依赖
└── README.md            # 项目说明
```

## 🔍 支持的卫星列表

| 卫星名称 | 轨道位置 |
|---------|---------|
| Apstar-5C (Telstar 18 Vantage) | 138.0°E |
| EutelSat-172B | 172.0°E |
| Apstar-6D | 134.5°E |
| Apstar-6C | 134.0°E |
| Apstar-9 | 142.0°E |
| Apstar-7 | 76.5°E |
| AsiaSat-9 | 122.0°E |
| AsiaSat-7 | 105.5°E |
| ChinaSat-16 (圆极化) | 110.5°E |
| ChinaSat-26 (圆极化) | 125.0°E |

## 📱 浏览器兼容性

- ✅ Chrome/Edge (推荐)
- ✅ Firefox
- ✅ Safari
- ✅ 移动浏览器（iOS Safari, Chrome Mobile）

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 👨‍💻 作者

MisterYe

## 🙏 致谢

感谢所有为卫星通信技术做出贡献的工程师和研究人员。

---

**注意**：本工具计算结果仅供参考，实际安装时还需要考虑地形、遮挡物等因素，建议使用专业仪器进行最终调整。
